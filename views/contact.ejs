<%- include('./partials/header.ejs') %>

<div class="contact-container m-2 d-flex flex-column justify-content-center col-lg-6 col-md-8 col-sm-11 mx-auto">
    <h1 class="text-center">Contact Us</h1>

    <form action="/contact-sent" method="POST" onsubmit="return requireOtherOption()" class=" d-flex flex-column m-2 ">
        <label for="name">Full Name:</label>
        <input type="text" name="name" required>

        <label for="email" class="mt-2">Email:</label>
        <input type="email" name="email" required>

        <label for="trafficSource" class="mt-2">How did you know about us?:</label>
        <select name="trafficSource" onchange="displayOther(this)" required>
            <option value="blog">Blog or Article</option>
            <option value="youtube">Youtube</option>
            <option value="socialMedia">Social Media</option>
            <option value="other">Other</option>
        </select>

        <div id="additionalField" style="display: none;">
            <label for="additionalField">Please specify where you came through:</label>
            <input type="text" id="other" name="additionalField">
        </div>

        <label class="mt-2">Content: </label>
        <textarea name="contactText" style="height: 250px;" required></textarea>

        <input type="submit" id="submitBtn" name="submitBtn" value="Submit" class="btn btn-warning mt-3" style="align-self: flex-end;">
    </form>
</div>

<script>
    function displayOther(obj) {
        const otherDiv = document.getElementById('additionalField');
        otherDiv.style.display = obj.value === "other" ? "block" : "none";
    };

    function requireOtherOption() {
        const valueSelected = document.querySelector("[name = trafficSource]").value;
        const additionalField = document.getElementById('other');
        
        if (valueSelected === "other" && !additionalField.value.trim()) {
            alert ("Please specify where you came through! :) ");
            return false;
        } else {
            return true;
        };
    };
</script>

<%- include('./partials/footer.ejs') %>